(1..100).each {
    task('sleep' + it.toString().padLeft(3, '0'), type: SleepExec)
}

task sleep {
    dependsOn tasks.withType(SleepExec)
}

@ParallelizableTask
class SleepExec extends DefaultTask {
    @TaskAction
    void sleep() {
        def proc = ['sleep', 1].execute()
        proc.waitFor()
    }
}
